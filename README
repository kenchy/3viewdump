v0.2 25/01/2011

This program results from a search for a method to download programs from my 3view Freeview HD recorder.
The recorder exposes all of the recordings using UPNP.
People were coming up with mechanisms using windows media player, and chunks of HTML.

I don't really use windows, and I don't want to use a browser to do this.

I came across the Net::UPNP perl class which includes an example called dms2vodcast,
which I have adapted to my purposes. Thanks to the original author.

Usage:

install Net::UPNP, curl and ffmpeg
some of the debug needs Data::Dumper

./3viewdump.pl -s "Case Sensitive Search String" -a <Date of recording YYYYMMDD> [-f 'rss output file']

example:

./3viewdump.pl -s Peppa -a 20101220
will download all of the Peppa Pigs from the 20th December 2010, (there are a lot of them)

./3viewdump.pl -s Peppa -a 20101220 -f peppa.rss
will create an rss file with links to all of the Peppa Pigs from the 20th December 2010

Note on ffmpeg:
Once the file is downloaded, it is then passed through ffmpeg, with -acodec=copy and -vodec=copy I find this makes the file easier to play.

DONE:
Functions as expected.

ISSUES:
Lots of cruft.
SD Files need to be run through ffmpeg to make them easily playable.
Same issue with HD files but ffmpeg doesn't always fix them.

TODO:
Improve search
remove debug
Move RSS code to a function
Generate plain HTML instead of RSS?
